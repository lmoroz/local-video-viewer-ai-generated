import{r as c,w as $,c as o,a as s,b as p,d as x,e as S,_ as N,t as i,F as V,f as j,u as B,g as F,o as r,h as C,i as I,j as h,k as _,l as g}from"./index-30gPN4Zs.js";const M={class:"min-h-screen"},R={class:"sticky top-0 z-10 backdrop-blur-sm border-b border-gray-800 shadow-md bg-gray-900/80"},D={class:"max-w-7xl mx-auto px-8 py-4 flex items-center gap-4"},H={class:"flex-1 flex items-center justify-between"},z={class:"w-full max-w-md"},E={class:"max-w-7xl mx-auto p-8"},L={key:0,class:"text-center py-12"},P={key:1,class:"text-center py-12 text-red-600"},T={key:2,class:"text-center py-12 text-gray-500"},U={key:3,class:"flex flex-col gap-4"},A={class:"w-48 flex-shrink-0 bg-gray-700 relative overflow-hidden"},G=["src"],J={key:1,class:"w-full h-full flex items-center justify-center text-gray-400"},K={class:"absolute bottom-1 right-1 bg-black/80 text-white text-xs px-1.5 py-0.5 rounded font-mono"},O={class:"p-4 flex-grow flex flex-col justify-center min-w-0"},W={class:"font-semibold text-white text-lg mb-1 group-hover:text-blue-400 transition-colors truncate"},X={class:"text-sm text-gray-400 mb-1 flex items-center gap-2"},Y={class:"truncate"},Z={class:"flex items-center gap-3 text-sm text-gray-500"},Q={key:0,class:"flex items-center gap-1 truncate"},tt={key:1,class:"flex items-center gap-1"},at={__name:"SearchPage",setup(et){const b=B(),y=F(),u=c(""),n=c(""),d=c([]),f=c(!1),m=c(null),v=async(e,t)=>{if(!(!e||!t)){f.value=!0,m.value=null,d.value=[];try{const l=await h.searchVideos(e,t);d.value=l.data}catch(l){console.error(l),m.value="Failed to perform search"}finally{f.value=!1}}},w=e=>{e.trim()&&y.push({name:"Search",query:{q:e,dir:n.value}})},k=e=>{if(!e)return"0:00";const t=Math.floor(e/3600),l=Math.floor(e%3600/60),a=Math.floor(e%60);return t>0?`${t}:${l.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${l}:${a.toString().padStart(2,"0")}`},q=e=>{if(!e||e.length!==8)return e;const t=e.substring(0,4),l=e.substring(4,6);return`${e.substring(6,8)}.${l}.${t}`};return $(()=>b.query,e=>{u.value=e.q||"",n.value=e.dir||"",u.value&&n.value&&v(u.value,n.value)},{immediate:!0}),(e,t)=>{const l=S("router-link");return r(),o("div",M,[s("div",R,[s("div",D,[p(l,{to:{name:"Home",query:{dir:n.value}},class:"p-2 rounded-full hover:bg-gray-700 transition-colors group",title:"Back to Home"},{default:x(()=>[...t[0]||(t[0]=[s("i",{class:"bi bi-arrow-left text-xl text-gray-400 group-hover:text-white transition-colors"},null,-1)])]),_:1},8,["to"]),s("div",H,[t[1]||(t[1]=s("h1",{class:"text-xl font-bold text-white truncate mr-4"},"Search Results",-1)),s("div",z,[p(N,{"initial-query":u.value,disabled:!n.value,onSearch:w},null,8,["initial-query","disabled"])])])])]),s("div",E,[f.value?(r(),o("div",L,[...t[2]||(t[2]=[s("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1)])])):m.value?(r(),o("div",P,i(m.value),1)):d.value.length===0?(r(),o("div",T,' No videos found matching "'+i(u.value)+'" ',1)):(r(),o("div",U,[(r(!0),o(V,null,j(d.value,a=>(r(),C(l,{key:a.id||a.filename,to:{name:"Video",params:{videoId:a.id||a.filename,playlistId:a.playlistId},query:{dir:n.value}},class:"bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden flex cursor-pointer group h-32"},{default:x(()=>[s("div",A,[a.thumbnail?(r(),o("img",{key:0,src:I(h).getFileUrl(a.thumbnail),class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"},null,8,G)):(r(),o("div",J,[...t[3]||(t[3]=[s("i",{class:"bi bi-play-circle text-3xl"},null,-1)])])),s("div",K,i(k(a.duration)),1)]),s("div",O,[s("h3",W,i(a.title),1),s("div",X,[t[4]||(t[4]=s("i",{class:"bi bi-folder"},null,-1)),s("span",Y,i(a.playlistName),1)]),s("div",Z,[a.uploader?(r(),o("span",Q,[t[5]||(t[5]=s("i",{class:"bi bi-person"},null,-1)),g(" "+i(a.uploader),1)])):_("",!0),a.upload_date?(r(),o("span",tt,[t[6]||(t[6]=s("i",{class:"bi bi-calendar"},null,-1)),g(" "+i(q(a.upload_date)),1)])):_("",!0)])])]),_:2},1032,["to"]))),128))]))])])}}};export{at as default};
